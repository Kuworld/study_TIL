# 다형성과 설계

## 1. 좋은 객체 지향 프로그래밍이란?
### 객체 지향 특징

 * 추상화
 * 캡슐화
 * 상속
 * **다형성** (중요!!)

### 객체지향 프로그래밍

 * 객체 지향 프로그래밍이은 컴퓨터 프로그램을 명령어 목록으로 시각에서 벗어나 독립된 단위, 즉 `객체`들의 모임으로 파악하고자 하는것, 각각의 객체는 메세지를 주고받고 데이터를 처리할 수 있다.
 * 객체지향 프로그래밍은 프로그램을 유연하고 변경이 용이 하게 만들기 때문에 대규모 소프트 웨어에 많이 사용된다.
   
   * 유연하고 변경이 유용하다는 말은?
     * 레고블럭 조립하듯이
     * 키보드, 마우스 갈아 끼우듯
     * 컴퓨터 부품을 갈아 끼우듯이
### 다형성
 * 역할과 구현으로 세상을 구분
   * 운전자 - 자동차
   * 공연무대
   * 키보드, 마우스, 세상의 표준 인터페이스들
   * 정렬 알고리즘
   * 할인 정책 로직
 
 * 역할과 구현으로 구분하면 세상이 단순해지고, 유연해지며 변경도 편리해진다.
   * `클라이언트`는 대상의 역할(인터페이스)만 알면 된다.
   * `클라이언트`는 구현대상의 내부구조를 몰라도 된다.
   * `클라이언트`는 구현 대상의 내부구조가 변경되어도 영향을 받지 않는다
   * `클라이언트`는 구현 대상 자체를 변경해도 영향을 받지 않는다.
 
### 역할과 구현을 분리
 * 자바 언어의 다형성 활용
   * 역할 = 인터페이스
   * 구현 = 인터페이스를 구현한 클래스, 구현 객체
 * 역할과 구현을 명확히 분리
 * 역할(인터페이스)을 먼저 부여하고, 그 역할을 수행하는 구현 객체 만들기

### 객체의 협력이라는 관계부터 생각
 * 혼자있는 객체는 없음
 * 클라이언트 : 요청, 서버 : 응답
 * 수 많은 객체 클라이언트와 서버는 서로 협력 관계를 가진다.

### 자바언어의 다형성
 * 다형성으로 인터페이스를 구현한 객체를 실행 시점에 유연하게 변경할 수 있다,
 * 물론 클래스 상속 관계도 다형성, 오버라이딩 적용 가능

### 다형성의 본질
* 클라이언트를 변경하지 않고, 서버의 구현기능을 유연하게 변경할 수 있다.
* 확장가능한 설계
* 클라이언트에 영향을 주지 않음
* 인터페이스를 안정적으로 설계하는 것이 중요
## 정리
 * 다형성이 가장 중요하다!!
 * 디자인 패턴 대부분은 다형성을 활용하는 것이다.
 * 스프링의 핵심인 제어의 역전(IoC), 의존관계주입(DI)도 결국 다형성을 활용하는 것이다.


### OCP(Open-Closed Principle)원칙
 * 객체지향 설계의 원칙 중 하나
 * Open for extension**: 새로운 기능의 추가나 변경 사항이 생겼을 때, 기존 코드는 확장할 수 있어야 한다.
 * Closed for modification**: 기존의 코드는 수정되지 않아야 한다.
 * 확장에는 열려있고, 변경에는 닫혀있어야 한다는 뜻
 * 기존의 코드 수정없이 새로운 기능을 추가할 수 있다는 의미

#### 확장에 열려 있다는 의미
 * 인터페이스를 사용해서 새로운 클래스를 추가할 수있다.
 * 기존 인터페이스를 구현해서 새로운 기능을 추가할 수 있다는 의미이다.

#### 코드 수정이 닫혀있다는 의미
 * 새로운 클래스를 추가하게 되면 기능이 추가 되기 때문에 기존 코드의 수정은 불가피 하다. 당연히 어딘가의 코드는 수정을 해야한다.

#### 변하지 않는 부분
  * 인터페이스를 사용하면 클라이언트의 코드는 수정 X

#### 변하는 부분
 * `main()`고 같이 클라이언트에게 전달해 주는 역할을 하는 부분은 코드 수정이 필요. 이런 부분은 `OCP`를 지켜도 변경이 필요하다.

**전략 패턴(Strategy Pattern)**
 * 디자인 패턴중에 가장 중요한 패턴
 * 알고리즘을 클라이언트 코드의 변경없이 쉽게 교체할 수 있다.
